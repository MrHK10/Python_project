{% extends "base.html" %}
{% block title %}joblisting {% endblock title %}
{% block body %}
<div class="container">
    <!-- Add New Employee Button -->
    <div class="text-right mb-3">
        <a href="#addEmployeeModal" class="btn btn-success" data-toggle="modal"><i class="material-icons">&#xE147;</i> Add New Employee</a>
    </div>
    <!-- Card Layout for Employees -->
    <div class="row">
        {% for i in emp1 %}
        <div class="col-md-4 mb-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">{{ i.job_title }}</h5>
                    <p class="card-text">ID: {{ i.id }}</p>
                    <p class="card-text">Salary: {{ i.salary }}</p>
                    {% comment %} <p class="card-text">Description: {{ i.description }}</p> {% endcomment %}
                    <p class="card-text">Location: {{ i.location }}</p>
                    <p class="card-text">Type: {{ i.type }}</p>
                    <p class="card-text">Date of Post: {{ i.date_job_post }}</p>
                    {% comment %} <p class="card-text">Job Description: {{ i.job_description }}</p> {% endcomment %}
                    {% comment %} <p class="card-text">Date of Scrap: {{ i.date_of_scrap }}</p> {% endcomment %}
                    <p class="card-text">Job ID: {{ i.job_id }}</p>
                    {% comment %} <p class="card-text">Source ID: {{ i.source_id }}</p>
                    <p class="card-text">Company ID: {{ i.company_id }}</p> {% endcomment %}
                </div>
                <div class="card-footer">
                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#detailModal{{ forloop.counter }}">
                        Details
                    </button>
                    <a href="#editJobModal-{{ forloop.counter }}" class="btn btn-primary" data-toggle="modal">Edit</a>
                    <a href="#deleteEmployeeModal-{{ forloop.counter }}" class="btn btn-danger" data-toggle="modal">Delete</a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
<div class="clearfix"></div>

<!-- Pagination moved to the bottom -->
<div class="pagination">
    <span class="step-links">
        {% if emp1.has_previous %}
            <a href="?page=2" class="btn btn-danger">&laquo; first</a>
            <a href="?page={{ emp1.previous_page_number }}" class="btn btn-primary">previous</a>
        {% endif %}

        <span class="current">
            Page {{ emp1.number }} of {{ emp1.paginator.num_pages }}.
        </span>

        {% if emp1.has_next %}
            <a href="?page={{ emp1.next_page_number }}" class="btn btn-primary" >next</a>
            <a href="?page={{ emp1.paginator.num_pages }}" class="btn btn-danger" >last &raquo;</a>
        {% endif %}
    </span>
</div>
        
    <div class="clearfix">
        <div class="hint-text">Showing <b>{{ emp1|length }}</b> entries</div>
    </div>
</div>

{% for i in emp1 %}
<div class="modal fade" id="detailModal{{ forloop.counter }}" tabindex="-1" role="dialog" aria-labelledby="detailModalLabel{{ forloop.counter }}" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="detailModalLabel{{ forloop.counter }}">Details</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <h5 class="card-title">{{ i.job_title }}</h5>
                    <p class="card-text">ID: {{ i.id }}</p>
                    <p class="card-text">Salary: {{ i.salary }}</p>
                    <p class="card-text">Description: {{ i.description }}</p>
                    <p class="card-text">Location: {{ i.location }}</p>
                    <p class="card-text">Type: {{ i.type }}</p>
                    <p class="card-text">Date of Post: {{ i.date_job_post }}</p>
                    <p class="card-text">Job Description: {{ i.job_description }}</p>
                    {% comment %} <p class="card-text">Date of Scrap: {{ i.date_of_scrap }}</p> {% endcomment %}
                    <p class="card-text">Job ID: {{ i.job_id }}</p>
                    {% comment %} <p class="card-text">Source ID: {{ i.source_id }}</p>
                    <p class="card-text">Company ID: {{ i.company_id }}</p> {% endcomment %}
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
{% endfor %}





<!-- add Modal HTML -->
<div id="addEmployeeModal" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <form action="{% url 'ADD' %}" method="POST">
                {% csrf_token %}
                <div class="modal-header">						
                    <h4 class="modal-title">Add Employee</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                </div>
                <div class="modal-body">					
                    <!-- Additional Fields -->
                    <div class="form-group">
                        <label>job_title</label>
                        <input name="job_title" type="text" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>salary</label>
                        <input name="salary" type="text" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>description</label>
                        <input name="description" type="text" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>location</label>
                        <input name="location" type="text" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>type</label>
                        <input name="type" type="text" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>date_of_post</label>
                        <input name="date_of_post"  type="date" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>job_description</label>
                        <textarea name="job_description" class="form-control" required></textarea>
                    </div>
                    <div class="form-group">
                        <label>date_of_scrap</label>
                        <input name="date_of_scrap" type="text" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>job_id</label>
                        <input name="job_id" type="text" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>source_id</label>
                        <input name="source_id" type="text" class="form-control">
                    </div>
                    <div class="form-group">
                        <label>company_id</label>
                        <input name="company_id" type="text" class="form-control" >
                    </div>					
                </div>
                <div class="modal-footer">
                    <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel">
                    <input type="submit" class="btn btn-success" value="Add">
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Edit Modal HTML -->
{% for i in emp1 %}
<div id="editJobModal-{{forloop.counter}}" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <form action="/update/{{i.id}}" method="POST">
                {% csrf_token %}
                <div class="modal-header">
                    <h4 class="modal-title">Edit Job</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                </div>
                <div class="modal-body">
                    {% comment %} <div class="form-group">
                        <label>Custom ID</label>
                        <input name="customid" value="{{i.custom_id}}"type="text" class="form-control" required>
                    </div> {% endcomment %}
                    <div class="form-group">
                        <label>Job Title</label>
                        <input name="job_title" value="{{i.job_title}}" type="text" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>description</label>
                        <input name="description" value="{{i.description}}" type="text" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>salary</label>
                        <input name="salary" value="{{i.salary}}" type="text" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>Location</label>
                        <input name="location" value="{{i.location}}"type="text" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>type</label>
                        <input name="type" value="{{i.type}}" type="text" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>date_of_post</label>
                        <input name="date_job_post" value="{{i.date_job_post}}"  type="date" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>job_description</label>
                        <input name="job_description" value="{{i.job_description}}" type="text" class="form-control" required>
                    </div>
                    {% comment %} <div class="form-group">
                        <label>date_of_scrap</label>
                        <input name="date_of_scrap" value="{{i.date_of_scrap}}" type="date" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>job_id</label>
                        <input name="job_id" value="{{i.job_id}}" type="text" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>source_id</label>
                        <input name="source_id" value="{{i.source_id}}" type="text" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>company_id</label>
                        <input name="company_id" value="{{i.company_id}}" type="text" class="form-control" required>
                    </div> {% endcomment %}

                </div>
                <div class="modal-footer">
                    <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel">
                    <input type="submit" class="btn btn-info" value="Save">
                </div>
            </form>
        </div>
    </div>
</div>
{% endfor %}
<!-- Delete Modal HTML -->
{% for i in emp1 %}
<div id="deleteEmployeeModal-{{forloop.counter}}" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <form>
                <div class="modal-header">						
                    <h4 class="modal-title">Delete Employee</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                </div>
                <div class="modal-body">					
                    <p>Are you sure you want to delete these Records?</p>
                    <p class="text-warning"><small>This action cannot be undone.</small></p>
                </div>
                <div class="modal-footer">
                    <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel">
                    <a  href="/delete3/{{i.id}}" type="submit" class="btn btn-danger">Delete</a>
                </div>
            </form>
        </div>
    </div>
</div>
{%endfor%}


<script>
    $(document).ready(function(){
        // Activate tooltip
        $('[data-toggle="tooltip"]').tooltip();
        
        // Select/Deselect checkboxes
        var checkbox = $('table tbody input[type="checkbox"]');
        $("#selectAll").click(function(){
            if(this.checked){
                checkbox.each(function(){
                    this.checked = true;                        
                });
            } else{
                checkbox.each(function(){
                    this.checked = false;                        
                });
            } 
        });
        checkbox.click(function(){
            if(!this.checked){
                $("#selectAll").prop("checked", false);
            }
        });
    });





</script>

{% endblock body %}